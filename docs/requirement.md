# 程序-全栈测试题

## 面试题目：广告ROI数据分析系统
数据文件：`app_roi_data.csv`

## 项目背景
基于真实移动应用广告投放数据的面试题目，用于考察候选人的Web开发能力和数据可视化。

## 数据说明
### 数据文件
- `app_roi_data.csv` - 主要数据文件

### 数据结构
| 列名               | 说明                 | 示例               |
|--------------------|----------------------|--------------------|
| 日期               | 投放日期             | 2025-04-13(日)     |
| app                | 应用名称             | App-1, App-2...   |
| 出价类型           | 广告出价类型         | CPI                |
| 国家地区           | 投放国家             | 美国, 英国         |
| 应用安装.总次数    | 当日应用安装次数     | 140                |
| 当日ROI            | 当日投资回报率       | 6.79%              |
| 1日ROI             | 1日累计ROI           | 14.24%             |
| 3日ROI             | 3日累计ROI           | 27.3%              |
| 7日ROI             | 7日累计ROI           | 64.44%             |
| 14日ROI            | 14日累计ROI          | 120.89%            |
| 30日ROI            | 30日累计ROI          | 214.65%            |
| 60日ROI            | 60日累计ROI          | 368.42%            |
| 90日ROI            | 90日累计ROI          | 413.81%            |

### 数据特点
- 时间范围：2025年4月13日 - 2025年7月12日（3个月）
- 总记录数：910条
- 应用数量：5个（App-1到App-5）
- 投放国家：美国、英国
- 出价类型：统一为CPI（每次安装成本）

### 重要数据说明
- **0%数据的两种含义**：
  1. 真实0%：该日期的实际ROI确实为0%（无收益或亏损）
  2. 日期不足0%：该日期到数据截止日期的时间间隔不足对应的ROI统计周期

- **日期不足0%的具体说明**：
  - 距离数据截止日期不足90天 → 90日ROI显示为0%
  - 距离数据截止日期不足60天 → 60日ROI显示为0%
  - 距离数据截止日期不足30天 → 30日ROI显示为0%

- **数据处理建议**：
  - 在数据库中添加标识字段区分两种0%情况
  - 图表中对"日期不足0%"可隐藏或用不同样式标记
  - 悬停提示中说明0%的具体原因

## 数据存储要求
- **必须**：将CSV数据导入数据库系统存储和查询
- **禁止**：直接读取CSV文件进行数据查询展示
- **数据库设计**：设计合理的数据表结构存储ROI数据
- **数据导入**：实现CSV批量导入数据库功能

## 页面设计规范
### 整体布局
- 页面标题："App-X-多时间维度ROI趋势"（X为选中的应用编号）
- 副标题："(7日移动平均)"
- 数据范围："数据范围:最近90天"

### 筛选控制区域
**第一行筛选器（从左到右）**：
1. 用户安装渠道（下拉选择：Apple）
2. 出价类型（下拉选择：CPI）
3. 国家地区（下拉选择：美国、英国等）
4. APP（下拉选择：App-1到App-5）

**第二行控制器（水平排列）**：
1. 数据显示模式：◯ 显示移动平均值 ◯ 显示原始数据
2. Y轴刻度：◯ 线性刻度 ◯ 对数刻度

### 图表区域
- **图表类型**：多条趋势线图
- **数据线（8条）**：
  - 当日(7日均值)
  - 1日(7日均值)
  - 3日(7日均值)
  - 7日(7日均值)
  - 14日(7日均值)
  - 30日(7日均值)
  - 60日(7日均值)
  - 90日(7日均值)
- **预测数据**：虚线样式（相同颜色）
- **100%回本线**：红色水平线，标注"100%回本线"
- **坐标轴**：
  - X轴：时间标签（日期格式）
  - Y轴：百分比标签
- **图例**：显示所有数据线颜色和名称

### 交互功能
- 下拉选择器切换时更新图表数据和标题
- 单选框切换时更新图表显示模式
- 鼠标悬停显示具体数值
- 图例点击切换数据线显示/隐藏

## 题目要求
### 基础要求（必须完成）
1. **数据库设计和数据导入**
   - 设计合理的数据表结构
   - 区分真实0%和日期不足0%的数据标识
   - 实现CSV批量导入功能

2. **数据读取与展示**
   - 通过数据库查询获取数据（禁止直接读取CSV）
   - 实现筛选功能（应用/国家/日期范围）
   - 设计API接口提供数据查询服务

3. **ROI趋势图表**
   - 绘制8个时间维度的ROI趋势图
   - 支持应用/国家筛选
   - 添加100%回本线（红色水平线）
   - 支持预测数据（虚线样式）
   - 正确处理0%数据点

4. **页面布局和交互控制**
   - 实现顶部筛选器和控制器布局
   - 符合设计规范的样式实现

5. **详细设计和使用文档**
   - 系统设计文档（架构/数据库/API/前端组件）
   - 使用说明文档（安装指南/数据导入/功能操作）
   - 部署文档（环境配置/数据库初始化/生产部署）

### 进阶要求（加分项）
1. **高级图表功能**
   - 支持对数/线性坐标切换
   - 支持移动平均线显示
   - 数据点悬停详情
   - 图例显示/隐藏功能

2. **数据分析功能**
   - ROI预测（基于历史数据）
   - 移动平均计算
   - 趋势分析和异常检测
   - 智能处理0%数据点

3. **用户体验优化**
   - 响应式设计
   - 暗色模式支持

4. **技术架构**
   - 前后端分离架构
   - RESTful API设计
   - 清晰代码结构和注释
   - 完善的错误处理

## 技术栈建议
### 推荐方案
- **前端**：Next.js 14 + React 18 + TypeScript + Tailwind CSS + ShadCN/UI + Recharts
- **后端**：Node.js + Express.js + TypeScript（必需）
- **数据库**：MySQL 8.0+ 
- **数据处理**：后端处理CSV导入，前端通过API获取数据
- **渲染方式**：CSR（客户端渲染）

### 替代技术栈
- **前端**：Vue.js 3+ / Angular 15+ + TypeScript
- **后端**：Python (Flask/Django) / Java (Spring Boot) / Go (Gin)
- **数据库**： MySQL / SQLite（开发环境）
- **图表库**：D3.js / ECharts

## 开发环境要求
- Node.js 18+
- MySQL 8.0+ 
- npm 或 yarn

## 评分标准
| 类别          | 权重 | 说明 |
|---------------|------|------|
| 功能实现      | 40% | 数据展示(20%)+图表功能(15%)+界面交互(5%) |
| 文档质量      | 25% | 系统设计(10%)+使用说明(8%)+部署文档(7%) |
| 代码质量      | 20% | 代码结构/命名规范/错误处理/最佳实践 |
| 用户体验      | 10% | 界面美观度/交互流畅性/响应式设计 |
| 技术深度      | 5%  | 技术选型合理性/性能优化/扩展性 |

## 提交要求
1. **代码仓库**：完整的项目代码（GitHub地址）
2. **演示**：部署地址
3. **文档包**：
   - `README.md`：项目启动说明
   - `DESIGN.md`：系统设计文档
   - `USER_GUIDE.md`：用户指南
   - `DEPLOYMENT.md`：部署文档
4. **AI提示词导出**（如使用AI辅助开发）
5. **演示视频**（可选）：功能演示视频

## 文档模板要求
### DESIGN.md
- 系统整体架构图
- 数据库表结构设计和ER图
- API接口设计规范
- 前端组件层次结构
- 数据流向图（CSV→数据库→API→前端）

### USER_GUIDE.md
- 项目功能介绍
- 数据导入操作指南
- 图表操作指南
- 筛选功能使用方法
- 界面截图说明

### DEPLOYMENT.md
- 环境依赖清单（Node.js/数据库等）
- 数据库安装配置
- 项目安装步骤
- 数据库初始化和CSV导入
- 生产环境配置